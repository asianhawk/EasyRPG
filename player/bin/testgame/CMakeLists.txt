CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT(TEST CXX C)

FIND_PACKAGE(Boost COMPONENTS serialization REQUIRED)

ADD_DEFINITIONS(
	-Wall -Werror # -Wextra
	-Wno-mismatched-tags
	-fno-exceptions -fno-rtti
)

IF(${CMAKE_BUILD_TYPE} STREQUAL "Debug")
	ADD_DEFINITIONS(-D _DEBUG=1)
ENDIF()

INCLUDE(TestBigEndian)
TEST_BIG_ENDIAN(IS_BIG_ENDIAN)
IF(${IS_BIG_ENDIAN})
	ADD_DEFINITIONS(-D READER_BIG_ENDIAN=1)
ENDIF()

INCLUDE_DIRECTORIES(
	${Boost_INCLUDE_DIRS}
	${CMAKE_CURRENT_SOURCE_DIR}/../../../readers/include
)

AUX_SOURCE_DIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/../../../readers/src SRCS)
ADD_EXECUTABLE(${PROJECT_NAME} ${SRCS} test.cxx)
TARGET_LINK_LIBRARIES(${PROJECT_NAME}
	${Boost_LIBRARIES}
	iconv
)
